     1 00000000 B40E                    mov ah, 0x0e ; enter tty mode
     2                                  
     3 00000002 A0[2900]                mov al, [the_secret]
     4 00000005 CD10                    int 0x10                        ; This won't work because the address of the_secret is based 
     5                                                                  ; on the wrong offset (since no offset is set, it's currently 
     6                                                                  ; 0, but we need it to be 0x7c00
     7                                  
     8 00000007 A0[297C]                mov al, [0x7c00 + the_secret]   ; This would work though, because we got the offset right.
     9 0000000A CD10                    int 0x10
    10                                  
    11 0000000C BBC007                  mov bx, 0x7c0                   ; We use 0x7c0 instead of 0x7c0 because it automatically
    12                                                                  ; shifts 4 bits to the left for us. 
    13                                                                  ; (Don't know why though...)
    14 0000000F 8EDB                    mov ds, bx                      ; Can't set ds directly (have to use another general-purpose 
    15                                                                  ; register). All memory references now use offset in ds.
    16 00000011 A0[2900]                mov al, [the_secret]
    17 00000014 CD10                    int 0x10
    18                                  
    19 00000016 26A0[2900]              mov al, [es:the_secret]         ; This will not work yet because es is still 0x0000
    20 0000001A CD10                    int 0x10                    
    21                                  
    22                                  ; But if we set es to 0x7c00 (we only move in 0x7c0 though), it will work!
    23 0000001C BBC007                  mov bx, 0x7c0
    24 0000001F 8EC3                    mov es, bx
    25 00000021 26A0[2900]              mov al, [es:the_secret]
    26 00000025 CD10                    int 0x10
    27                                  
    28 00000027 EBFE                    jmp $
    29                                  
    30                                  the_secret:
    31 00000029 58                          db "X"
    32                                  
    33 0000002A 00<rept>                times 510 - ($ - $$) db 0
    34 000001FE 55AA                    dw 0xaa55
